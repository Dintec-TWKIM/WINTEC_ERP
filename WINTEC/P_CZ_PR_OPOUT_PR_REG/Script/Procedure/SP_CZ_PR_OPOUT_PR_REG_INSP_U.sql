USE [NEOE]
GO
/****** Object:  StoredProcedure [NEOE].[SP_CZ_PR_OPOUT_PR_REG_INSP_U]    Script Date: 2022-11-17 오후 2:09:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[SP_CZ_PR_OPOUT_PR_REG_INSP_U]
(
	@P_CD_COMPANY		NVARCHAR(7),
	@P_YN_CHK			NVARCHAR(7),
	@P_NO_WO			NVARCHAR(20),
	@P_NO_WO_LINE		NUMERIC(5, 0),
	@P_SEQ_WO			NUMERIC(5, 0),
	@P_NO_PR			NVARCHAR(20),
	@P_NO_OPOUT_PR		NVARCHAR(20),
	@P_NO_PR_LINE		NUMERIC(5, 0),
	@P_DT_INSP			NVARCHAR(8),
	@P_NO_INSERT		NVARCHAR(15)
) 
AS

SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
SET NOCOUNT ON

IF @P_YN_CHK = 'Y'
BEGIN
INSERT INTO CZ_PR_WO_INSP
(
	CD_COMPANY
,	NO_WO
,	NO_LINE
,	SEQ_WO
,	NO_INSP
,	DTS_INSERT
,	ID_INSERT
,	NO_OPOUT_PR
,	NO_PR_LINE
,	DT_INSP
,	NO_EMP
)
VALUES
(
	@P_CD_COMPANY
,	@P_NO_WO
,	@P_NO_WO_LINE
,	@P_SEQ_WO
,	994
,	NEOE.SF_SYSDATE(GETDATE())
,	@P_NO_INSERT
,	@P_NO_PR
,	@P_NO_PR_LINE
,	@P_DT_INSP
,	@P_NO_INSERT
)
END

ELSE
BEGIN
DELETE FROM CZ_PR_WO_INSP
WHERE CD_COMPANY = @P_CD_COMPANY
AND NO_WO = @P_NO_WO
AND NO_LINE = @P_NO_WO_LINE
AND SEQ_WO = @P_SEQ_WO
AND NO_OPOUT_PR = @P_NO_OPOUT_PR
AND NO_PR_LINE = @P_NO_PR_LINE
END