USE [NEOE]
GO

/****** Object:  StoredProcedure [NEOE].[SP_CZ_MA_DOCUMENT_MNG_WINTEC_S]    Script Date: 2017-01-05 오후 5:48:55 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[SP_CZ_MA_DOCUMENT_MNG_WINTEC_S]          
(
	@P_CD_COMPANY			NVARCHAR(7),
	@P_CD_PLANT				NVARCHAR(7),
	@P_CD_ITEM				NVARCHAR(20),
	@P_NO_DRAWING			NVARCHAR(20),
	@P_STND_DETAIL_ITEM		NVARCHAR(200)
)  
AS
   
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

SELECT DW.SEQ,
	   DW.TP_DRAWING,
	   DW.NO_DRAWING,
	   DW.CD_ITEM,
	   MI.NM_ITEM,
	   MI.STND_DETAIL_ITEM,
	   DW.NM_FILE,
	   DW.DC_RMK
FROM CZ_MA_DRAWING_WINTEC DW
LEFT JOIN MA_PITEM MI ON MI.CD_COMPANY = DW.CD_COMPANY AND MI.CD_PLANT = DW.CD_PLANT AND MI.CD_ITEM = DW.CD_ITEM
WHERE DW.CD_COMPANY = @P_CD_COMPANY
AND DW.CD_PLANT = @P_CD_PLANT
AND (ISNULL(@P_CD_ITEM, '') = '' OR DW.CD_ITEM = @P_CD_ITEM)
AND (ISNULL(@P_NO_DRAWING, '') = '' OR DW.NO_DRAWING LIKE @P_NO_DRAWING + '%')
AND (ISNULL(@P_STND_DETAIL_ITEM, '') = '' OR MI.STND_DETAIL_ITEM LIKE '%' + @P_STND_DETAIL_ITEM + '%')
ORDER BY DW.SEQ

GO

