USE [NEOE]
GO
/****** Object:  StoredProcedure [NEOE].[SP_CZ_SU_PR_D]    Script Date: 2021-03-18 오후 3:59:31 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[SP_CZ_SU_PR_D]
(
    @P_CD_COMPANY		NVARCHAR(7),
    @P_CD_PLANT			NVARCHAR(7),
    @P_NO_PR			NVARCHAR(20),
    @P_NO_LINE			NUMERIC(5, 0)
)
AS

DELETE SU_PRL
WHERE CD_COMPANY = @P_CD_COMPANY
AND CD_PLANT = @P_CD_PLANT
AND NO_PR = @P_NO_PR
AND NO_LINE = @P_NO_LINE

DELETE CZ_PR_SA_SOL_SU_PRL_MAPPING
WHERE CD_COMPANY = @P_CD_COMPANY
AND CD_PLANT = @P_CD_PLANT
AND NO_PR = @P_NO_PR
AND NO_LINE = @P_NO_LINE

IF NOT EXISTS (SELECT 1 
               FROM SU_PRL
               WHERE CD_COMPANY = @P_CD_COMPANY
               AND CD_PLANT = @P_CD_PLANT
               AND NO_PR = @P_NO_PR)
BEGIN
    DELETE SU_PRH
    WHERE CD_COMPANY = @P_CD_COMPANY
    AND CD_PLANT = @P_CD_PLANT
    AND	NO_PR = @P_NO_PR
END

GO