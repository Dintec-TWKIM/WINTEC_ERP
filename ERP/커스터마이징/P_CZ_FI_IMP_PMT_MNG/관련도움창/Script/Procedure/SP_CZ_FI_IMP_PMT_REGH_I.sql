USE [NEOE]
GO

/****** Object:  StoredProcedure [NEOE].[SP_CZ_FI_TAX_REG_U]    Script Date: 2015-08-11 오전 11:18:27 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[SP_CZ_FI_IMP_PMT_REGH_I] 
(
	@P_CD_COMPANY		NVARCHAR(7),
	@P_NO_IMPORT		NVARCHAR(14),
	@P_NO_BL			NVARCHAR(20),
	@P_DT_IMPORT		NVARCHAR(8),
	@P_CD_PAYMENT		NVARCHAR(20),
	@P_DT_LIMIT			NVARCHAR(8),
	@P_AM_VAT_BASE		NUMERIC(17, 4),
	@P_AM_VAT			NUMERIC(17, 4),
	@P_NO_EMP			NVARCHAR(10),
	@P_ID_INSERT		NVARCHAR(15)
) 
AS

IF NOT EXISTS (SELECT 1 
			   FROM CZ_FI_IMP_PMTH
			   WHERE CD_COMPANY = @P_CD_COMPANY
			   AND NO_IMPORT = @P_NO_IMPORT)
BEGIN
	INSERT INTO CZ_FI_IMP_PMTH
	(
		CD_COMPANY,
		NO_IMPORT,
		NO_BL,
		DT_IMPORT,
		CD_PAYMENT,
		DT_LIMIT,
		AM_VAT_BASE,
		AM_VAT,
		NO_EMP,
		ID_INSERT,
		DTS_INSERT
	)
	VALUES
	(
		@P_CD_COMPANY,
		@P_NO_IMPORT,
		@P_NO_BL,
		@P_DT_IMPORT,
		@P_CD_PAYMENT,
		@P_DT_LIMIT,
		@P_AM_VAT_BASE,
		@P_AM_VAT,
		@P_NO_EMP,
		@P_ID_INSERT,
		NEOE.SF_SYSDATE(GETDATE())
	)
END

GO