USE [NEOE]
GO

/****** Object:  StoredProcedure [NEOE].[SP_CZ_SA_CONTRACT_RPT_U]    Script Date: 2015-06-29 오후 7:15:51 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

  
ALTER PROCEDURE [NEOE].[SP_CZ_SA_CONTRACT_RPTL_U]    
(    
    @P_CD_COMPANY       NVARCHAR(7),
    @P_NO_SO            NVARCHAR(20),
    @P_SEQ_SO           NUMERIC(5,0),
    @P_DC_RMK           NVARCHAR(550),
    @P_ID_UPDATE        NVARCHAR(15)
)    
AS    
IF NOT EXISTS (SELECT 1 FROM CZ_SA_CONTRACT_RPTL WHERE CD_COMPANY = @P_CD_COMPANY AND NO_SO = @P_NO_SO AND SEQ_SO = @P_SEQ_SO)
BEGIN
	INSERT INTO CZ_SA_CONTRACT_RPTL
	(
		CD_COMPANY,
		NO_SO,
		SEQ_SO,
		DC_RMK,
		ID_INSERT,
		DTS_INSERT
	)
	VALUES
	(
		@P_CD_COMPANY,
		@P_NO_SO,
		@P_SEQ_SO,
		@P_DC_RMK,
		@P_ID_UPDATE,
		NEOE.SF_SYSDATE(GETDATE())
	)
END
ELSE
BEGIN
	UPDATE CZ_SA_CONTRACT_RPTL
	SET DC_RMK = @P_DC_RMK,
	    ID_UPDATE = @P_ID_UPDATE,
		DTS_UPDATE = NEOE.SF_SYSDATE(GETDATE())
	WHERE CD_COMPANY = @P_CD_COMPANY
	AND NO_SO = @P_NO_SO
	AND SEQ_SO = @P_SEQ_SO
END

GO

