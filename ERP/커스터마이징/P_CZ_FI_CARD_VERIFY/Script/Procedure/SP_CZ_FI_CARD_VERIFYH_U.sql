USE [NEOE]
GO

/****** Object:  StoredProcedure [NEOE].[SP_CZ_FI_CARD_VERIFYH_U]    Script Date: 2016-12-28 오후 3:03:19 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [NEOE].[SP_CZ_FI_CARD_VERIFYH_U]
(
	@P_CD_COMPANY			NVARCHAR(7),
	@P_ACCT_NO				NVARCHAR(20),
	@P_ADMIN_NO				NVARCHAR(20),
	@P_YN_VERIFY			NVARCHAR(1),
	@P_DC_RMK				NVARCHAR(200),
	@P_ID_UPDATE			NVARCHAR(15)
)
AS  

SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

IF EXISTS (SELECT 1 
		   FROM CZ_FI_CARD_VERIFY CV
		   WHERE CV.CD_COMPANY = @P_CD_COMPANY
		   AND CV.ACCT_NO = @P_ACCT_NO
		   AND CV.ADMIN_NO = @P_ADMIN_NO)
BEGIN
	UPDATE CZ_FI_CARD_VERIFY
	SET YN_VERIFY = @P_YN_VERIFY,
		DC_RMK = @P_DC_RMK,
		ID_UPDATE = @P_ID_UPDATE,
		DTS_UPDATE = NEOE.SF_SYSDATE(GETDATE())
	WHERE CD_COMPANY = @P_CD_COMPANY
	AND ACCT_NO = @P_ACCT_NO
	AND ADMIN_NO = @P_ADMIN_NO
END
ELSE
BEGIN
	INSERT INTO CZ_FI_CARD_VERIFY
	(
		CD_COMPANY,
		ACCT_NO,
		ADMIN_NO,
		YN_VERIFY,
		DC_RMK,
		ID_INSERT,
		DTS_INSERT
	)
	VALUES
	(
		@P_CD_COMPANY,
		@P_ACCT_NO,
		@P_ADMIN_NO,
		@P_YN_VERIFY,
		@P_DC_RMK,
		@P_ID_UPDATE,
		NEOE.SF_SYSDATE(GETDATE())
	)
END





GO