USE [NEOE]
GO
/****** Object:  StoredProcedure [NEOE].[CZ_MAILBAGLIST_UL]    Script Date: 2023-05-03 ¿ÀÈÄ 4:46:22 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[CZ_MAILBAGLIST_UL]
(
	@P_SEND_COMPANY		NVARCHAR(2),
	@P_DAYS_RECORD		NVARCHAR(14),
	@P_SEND_NUM			NUMERIC(3,0),
	@P_SEND_CONTENTS	NVARCHAR(MAX),
	@P_SEND_QT			NUMERIC(3,0),
	@P_SEND_ID			NVARCHAR(15),
	@P_RECEIVE_ID		NVARCHAR(15),
	@P_INSPECT_ID		NVARCHAR(15),
	@P_DC_RMK			NVARCHAR(MAX),
	@P_DTS_UPDATE		NVARCHAR(14),
	@P_ID_UPDATE		NVARCHAR(15)
)
AS
   
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

UPDATE CZ_MAILBAGLIST_L
SET 
	SEND_CONTENTS	= @P_SEND_CONTENTS,
	SEND_QT			= @P_SEND_QT,
	SEND_ID			= @P_SEND_ID,
	RECEIVE_ID		= @P_RECEIVE_ID,
	INSPECT_ID		= @P_INSPECT_ID,
	DC_RMK			= @P_DC_RMK,
	DTS_UPDATE		= Convert(varchar(10),Getdate(),112) + Replace(Convert(varchar(8),Getdate(),108),':',''),
	ID_UPDATE		= B.NO_EMP

FROM CZ_MAILBAGLIST_L AS A
join CZ_MAILBAGLIST_H AS B ON A.SEND_COMPANY = B.SEND_COMPANY AND A.DAYS_RECORD = B.DAYS_RECORD
WHERE A.SEND_COMPANY = @P_SEND_COMPANY
AND A.DAYS_RECORD	= @P_DAYS_RECORD
AND A.SEND_NUM	= @P_SEND_NUM	
