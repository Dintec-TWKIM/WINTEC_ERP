USE [NEOE]
GO
/****** Object:  StoredProcedure [NEOE].[CZ_MAILBAGLIST_UL]    Script Date: 2023-05-03 ¿ÀÈÄ 4:46:22 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [NEOE].[CZ_MAILBAGLIST_UL]
(
	@P_CD_SEND			NVARCHAR(2),
	@P_DT_ACCT			NVARCHAR(14),
	@P_SEQ				NUMERIC(3,0),
	@P_NM_ITEM			NVARCHAR(MAX),
	@P_QT				NUMERIC(3,0),
	@P_NO_EMP_SEND		NVARCHAR(15),
	@P_NO_EMP_RECEIVE	NVARCHAR(15),
	@P_NO_EMP_INSPECT	NVARCHAR(15),
	@P_DC_RMK			NVARCHAR(MAX),
	@P_DTS_UPDATE		NVARCHAR(14),
	@P_ID_UPDATE		NVARCHAR(15)
)
AS
   
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

UPDATE CZ_MAILBAGLIST_L
SET 
	NM_ITEM			= @P_NM_ITEM,
	QT				= @P_QT,
	NO_EMP_SEND		= @P_NO_EMP_SEND,
	NO_EMP_RECEIVE	= @P_NO_EMP_RECEIVE,
	NO_EMP_INSPECT	= @P_NO_EMP_INSPECT,
	DC_RMK			= @P_DC_RMK,
	DTS_UPDATE		= Convert(varchar(10),Getdate(),112) + Replace(Convert(varchar(8),Getdate(),108),':',''),
	ID_UPDATE		= B.NO_EMP

FROM CZ_MAILBAGLIST_L AS A
JOIN CZ_MAILBAGLIST_H AS B ON A.CD_SEND = B.CD_SEND AND A.DT_ACCT = B.DT_ACCT
WHERE A.CD_SEND = @P_CD_SEND
AND A.DT_ACCT	= @P_DT_ACCT
AND A.SEQ		= @P_SEQ	
